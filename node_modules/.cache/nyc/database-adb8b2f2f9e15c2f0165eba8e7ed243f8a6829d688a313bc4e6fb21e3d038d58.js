function cov_2egindbbbp(){var path="/Users/Tomoko1/dbwebb-kurser/jsramverk/me/my-app-backend/db/database.js";var hash="5f0c4436b338493f70396c9c0da43f701ab7bc16";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/Tomoko1/dbwebb-kurser/jsramverk/me/my-app-backend/db/database.js",statementMap:{"0":{start:{line:4,column:14},end:{line:4,column:44}},"1":{start:{line:7,column:17},end:{line:29,column:1}},"2":{start:{line:9,column:18},end:{line:10,column:97}},"3":{start:{line:12,column:8},end:{line:14,column:9}},"4":{start:{line:13,column:12},end:{line:13,column:51}},"5":{start:{line:16,column:24},end:{line:19,column:10}},"6":{start:{line:20,column:19},end:{line:20,column:36}},"7":{start:{line:21,column:27},end:{line:21,column:62}},"8":{start:{line:23,column:8},end:{line:27,column:10}},"9":{start:{line:31,column:0},end:{line:31,column:26}}},fnMap:{"0":{name:"getDb",decl:{start:{line:8,column:26},end:{line:8,column:31}},loc:{start:{line:8,column:60},end:{line:28,column:5}},line:8}},branchMap:{"0":{loc:{start:{line:8,column:32},end:{line:8,column:58}},type:"default-arg",locations:[{start:{line:8,column:47},end:{line:8,column:58}}],line:8},"1":{loc:{start:{line:12,column:8},end:{line:14,column:9}},type:"if",locations:[{start:{line:12,column:8},end:{line:14,column:9}},{start:{line:12,column:8},end:{line:14,column:9}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0},b:{"0":[0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f0c4436b338493f70396c9c0da43f701ab7bc16"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2egindbbbp=function(){return actualCoverage;};}return actualCoverage;}cov_2egindbbbp();// Module for setting up connection to database (Express <-> mongodb)
// db:test, collection:documents
const mongo=(cov_2egindbbbp().s[0]++,require("mongodb").MongoClient);// const collectionName = "documents";
const database=(cov_2egindbbbp().s[1]++,{getDb:async function getDb(collectionName=(cov_2egindbbbp().b[0][0]++,"documents")){cov_2egindbbbp().f[0]++;let dsn=(cov_2egindbbbp().s[2]++,`mongodb+srv://${process.env.ATLAS_USERNAME}:`+`${process.env.ATLAS_PASSWORD}@cluster0.5vx9jte.mongodb.net/?retryWrites=true&w=majority`);cov_2egindbbbp().s[3]++;if(process.env.NODE_ENV==='test'){cov_2egindbbbp().b[1][0]++;cov_2egindbbbp().s[4]++;dsn="mongodb://localhost:27017/test";}else{cov_2egindbbbp().b[1][1]++;}const client=(cov_2egindbbbp().s[5]++,await mongo.connect(dsn,{useNewUrlParser:true,useUnifiedTopology:true}));const db=(cov_2egindbbbp().s[6]++,await client.db());const collection=(cov_2egindbbbp().s[7]++,await db.collection(collectionName));cov_2egindbbbp().s[8]++;return{db:db,collection:collection,client:client};}});cov_2egindbbbp().s[9]++;module.exports=database;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nbyIsInJlcXVpcmUiLCJNb25nb0NsaWVudCIsImRhdGFiYXNlIiwiZ2V0RGIiLCJjb2xsZWN0aW9uTmFtZSIsImRzbiIsInByb2Nlc3MiLCJlbnYiLCJBVExBU19VU0VSTkFNRSIsIkFUTEFTX1BBU1NXT1JEIiwiTk9ERV9FTlYiLCJjbGllbnQiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiZGIiLCJjb2xsZWN0aW9uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE1vZHVsZSBmb3Igc2V0dGluZyB1cCBjb25uZWN0aW9uIHRvIGRhdGFiYXNlIChFeHByZXNzIDwtPiBtb25nb2RiKVxuLy8gZGI6dGVzdCwgY29sbGVjdGlvbjpkb2N1bWVudHNcblxuY29uc3QgbW9uZ28gPSByZXF1aXJlKFwibW9uZ29kYlwiKS5Nb25nb0NsaWVudDtcbi8vIGNvbnN0IGNvbGxlY3Rpb25OYW1lID0gXCJkb2N1bWVudHNcIjtcblxuY29uc3QgZGF0YWJhc2UgPSB7XG4gICAgZ2V0RGI6IGFzeW5jIGZ1bmN0aW9uIGdldERiKGNvbGxlY3Rpb25OYW1lPVwiZG9jdW1lbnRzXCIpIHtcbiAgICAgICAgbGV0IGRzbiA9IGBtb25nb2RiK3NydjovLyR7cHJvY2Vzcy5lbnYuQVRMQVNfVVNFUk5BTUV9OmAgK1xuICAgICAgICBgJHtwcm9jZXNzLmVudi5BVExBU19QQVNTV09SRH1AY2x1c3RlcjAuNXZ4OWp0ZS5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5YDtcblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgZHNuID0gXCJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L3Rlc3RcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsaWVudCAgPSBhd2FpdCBtb25nby5jb25uZWN0KGRzbiwge1xuICAgICAgICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBjbGllbnQuZGIoKTtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oY29sbGVjdGlvbk5hbWUpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYjogZGIsXG4gICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLFxuICAgICAgICAgICAgY2xpZW50OiBjbGllbnQsXG4gICAgICAgIH07XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBkYXRhYmFzZTtcbiJdLCJtYXBwaW5ncyI6IjRzREFlWTtBQUFBLDJGQWZaO0FBQ0E7QUFFQSxLQUFNQSxNQUFLLDBCQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUNDLFdBQVcsRUFDNUM7QUFFQSxLQUFNQyxTQUFRLDBCQUFHLENBQ2JDLEtBQUssQ0FBRSxjQUFlQSxNQUFLLENBQUNDLGNBQWMsNkJBQUMsV0FBVyxFQUFFLHlCQUNwRCxHQUFJQyxJQUFHLDBCQUFJLGlCQUFnQkMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGNBQWUsR0FBRSxDQUN2RCxHQUFFRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0UsY0FBZSw0REFBMkQsRUFBQyx3QkFFMUYsR0FBSUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLFFBQVEsR0FBSyxNQUFNLENBQUUsb0RBQ2pDTCxHQUFHLENBQUcsZ0NBQWdDLENBQzFDLENBQUMsaUNBRUQsS0FBTU0sT0FBTSwwQkFBSSxLQUFNWixNQUFLLENBQUNhLE9BQU8sQ0FBQ1AsR0FBRyxDQUFFLENBQ3JDUSxlQUFlLENBQUUsSUFBSSxDQUNyQkMsa0JBQWtCLENBQUUsSUFDeEIsQ0FBQyxDQUFDLEVBQ0YsS0FBTUMsR0FBRSwwQkFBRyxLQUFNSixPQUFNLENBQUNJLEVBQUUsRUFBRSxFQUM1QixLQUFNQyxXQUFVLDBCQUFHLEtBQU1ELEdBQUUsQ0FBQ0MsVUFBVSxDQUFDWixjQUFjLENBQUMsRUFBQyx3QkFFdkQsTUFBTyxDQUNIVyxFQUFFLENBQUVBLEVBQUUsQ0FDTkMsVUFBVSxDQUFFQSxVQUFVLENBQ3RCTCxNQUFNLENBQUVBLE1BQ1osQ0FBQyxDQUNMLENBQ0osQ0FBQyxFQUFDLHdCQUVGTSxNQUFNLENBQUNDLE9BQU8sQ0FBR2hCLFFBQVEifQ==